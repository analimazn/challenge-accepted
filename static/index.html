<!DOCTYPE HTML>
<!--
	Highlights by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Climatempo - O melhor site de meteorologia do Brasil</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<section id="header">
				<header class="major">
					<a href="https://www.climatempo.com.br"><h1>Climatempo</h1></a>
				</header>
			</section>

		<!-- Search Locales -->
			<section class="main special">
				<div id="locale" class="container">
					<div class="content">
						<ul class="actions special">
							<li>
								<form v-on:submit.prevent>
									<input type="text" placeholder="Digite uma cidade..." v-model="name">
									<input type="submit" value="Buscar" v-on:click="getInputSearch"/>
								</form>
							</li>
						</ul>
					</div>
				</div>
			</section>

		<!-- Results of forecasts -->
			<section class="main special">
				<div class="container">
					<div class="content">
					</div>
				</div>
			</section>

		<!-- Footer -->
			<section id="footer">
				<footer>
					<ul class="copyright">
						<li><a href="https://www.linkedin.com/in/analimazn/">by: analima</a></li>
					</ul>
				</footer>
			</section>
			<script>
				const locale = new Vue({
					el: "#locale",
					data: {
						name: "",
						locale: {},
						weather: [],
					},
					methods: {
						getInputSearch: async function () {
			                let locales = await axios
								.get( "http://localhost:5000/locales/" + this.name)
								.then(res => res.data)
							
							let getWeatherForecasts = await axios
								.get( "http://localhost:5000/weather-forecasts/" + locales[0].id)
								.then(res => res.data)
							
							let weatherForecasts = getWeatherForecasts.map(weather => weather)
							console.log(weatherForecasts)
							this.name = "";
							return weatherForecasts;
						}
					}
				})

		</script>
	</body>
</html>